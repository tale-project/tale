{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "automerge": true,
  "automergeType": "pr",
  "rangeStrategy": "pin",
  "packageRules": [
    {
      "description": "Pin Python Docker image to 3.11 for RAG service (cognee dependencies don't support 3.14+)",
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "python"
      ],
      "matchFileNames": [
        "services/rag/Dockerfile"
      ],
      "allowedVersions": "<=3.11"
    },
    {
      "description": "Pin Python Docker image to 3.11 for Operator service (tiktoken and other dependencies don't have wheels for 3.14+)",
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "python"
      ],
      "matchFileNames": [
        "services/operator/Dockerfile"
      ],
      "allowedVersions": "<=3.11"
    },
    {
      "description": "Freeze better-auth at 1.3.27 for platform service",
      "matchManagers": [
        "npm"
      ],
      "matchPackageNames": [
        "better-auth"
      ],
      "matchFileNames": [
        "services/platform/package.json"
      ],
      "allowedVersions": "1.3.27"
    },
    {
      "description": "Disable Renovate updates for Convex-related packages for platform service (manual upgrades only)",
      "matchManagers": [
        "npm"
      ],
      "matchPackageNames": [
        "convex",
        "convex-helpers",
        "convex-test",
        "@convex-dev/agent",
        "@convex-dev/better-auth",
        "@convex-dev/workflow",
        "@convex-dev/workpool",
        "@convex-dev/eslint-plugin"
      ],
      "matchFileNames": [
        "services/platform/package.json"
      ],
      "enabled": false
    },
    {
      "description": "Pin @convex-dev/workpool to 0.3.0 - must match peer dependency requirement of @convex-dev/workflow",
      "matchManagers": [
        "npm"
      ],
      "matchPackageNames": [
        "@convex-dev/workpool"
      ],
      "matchFileNames": [
        "services/platform/package.json"
      ],
      "allowedVersions": "0.3.0"
    },
    {
      "description": "Disable Renovate updates for AI SDK packages (@convex-dev/agent requires ai@5, manual upgrades only)",
      "matchManagers": [
        "npm"
      ],
      "matchPackageNames": [
        "ai",
        "@ai-sdk/openai",
        "@ai-sdk/provider-utils"
      ],
      "matchFileNames": [
        "services/platform/package.json"
      ],
      "enabled": false
    }
  ]
}